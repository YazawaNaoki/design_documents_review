# ER図1
## 全体
- 管理者にアソシエーションを組む必要はない
- 購入履歴テーブルを作る必要がない（決済テーブルにまとめられる）
- 自分の住所以外の住所を登録できない
- 入荷履歴テーブルを作る必要がある
- ER図には登録日、更新日も書く必要があります。
- 注文商品を保存するテーブルがありません。

## 決済テーブル
- テーブル名を注文に変えるべき、そしてそのまま注文idカラムをPKに設定するべき
- 配送ステータス、合計金額、送料を保存できない
- どの商品を購入するのか保存できません
- 送付先の情報が足りません

## カートテーブル
- テーブル名をカート商品テーブルなどに変更するべき。
- アーティスト名、ジャケット画像、シングル/アルバム名カラムは不必要。
- どのユーザーのカート商品なのか分かりません。
- 注文idカラムは必要ありません。
- 決済テーブルとのアソシエーションは必要ありません

## エンドユーザー
‐ 退会済みか否かを判別できるカラムがありません。

## 商品
- アーティスト、ジャンル、レーベルの情報は使いまわせるようにしたいので別テーブルに分けましょう。
- 商品一つに対して複数のディスク、一つのディスクに対して複数の曲を保存できるようにしましょう。
- 在庫数は入荷数と売上から算出できるので必要ありません。
- 論理削除が考慮されていません
- ステータスが何を意味しているか不明です。












# 注意
* マークダウン形式で記入してください。
* 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。

# 研修担当レビュー
- 再提出の際、以下は残しておいてください。

## 全体
- ER図には登録日、更新日も書く必要があります。
> 購入履歴テーブルを作る必要がない（決済テーブルにまとめられる）
- 正しいですが、注文時に「何を購入したか」は判断できますでしょうか。
> 決済テーブルとカートテーブルのアソシエーションが逆
- そもそも決済（注文)とカートが結びついていることが問題です。
  - それぞれがどうあるべきか見直してみましょう。

## エンドユーザー
‐ 退会済みか否かを判別できるカラムがありません。

## 商品
- こちらに指摘がありませんが、結構な量の問題点がございます。
  - 別テーブルにわけないといけない情報、他で参照できる情報、何が入るかわからないカラム、etc...

## カート
- 全体項での指摘通り、関係性を誤解されていますので、見直してみましょう。

## 決済
- 他から参照できる情報はないでしょうか。
- 送付先の情報は十分でしょうか。

## レビュー
## 全体
- カートと決済のリレーションは必要ありますか？(このリレーションがあると決済した後もカートに情報を残しておく必要があり、カートを空にできません。また、どう親子関係も結べません。)
- 受注詳細テーブルが必要になります。(決済と商品のリレーションを作りたいが、多対多であるため、中間テーブルが必要。また、購入時価格を保存する必要もある。)

## 商品
- 在庫数は入荷数と売上から算出できるので必要ありません。

## カート
- 合計金額は算出できるので必要ありません。
- エンドユーザとのリレーションがありません。(このテーブルはエンドユーザと商品テーブルの中間テーブル的な役割があります)
















＞＞＞僕（松田良太）の問題抽出では、このER図に対して、カートテーブルを注文商品（受注詳細）テーブルとして扱うように促し、カート商品テーブル（未購入）の中間テーブルを別で作るように促していました（##全体の4行目、##カートテーブル一行目参照）。それを踏まえるとこの二回目のレビューの指摘のほとんどをクリアしていると思います。紛らわしくて申し訳ありません。よろしくお願いします。


# レビュー3回目
## 商品
- 論理削除が考慮されていません
- ステータスが何を意味しているか不明です。

## カート
- わかりにくいのでこのテーブル、カート内商品として扱ってください。
# レビュー４回目
## 決済
- 購入日カラムは必要かどうかの検討をお願いいたします。
