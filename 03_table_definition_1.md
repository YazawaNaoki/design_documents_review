# テーブル定義書1
## 全体
- テーブル名が大文字から始まっている。
- テーブル名にはキャメルケースに似ているものを用いている。
  > Active RecordにおけるCoC（Convention over Configuration）を見直してください。例えば、Bookというモデルクラスがある場合、これに対応するデータベースのテーブルは複数形の「books」になります。モデルのクラス名が2語以上の複合語である場合、テーブル名は小文字かつアンダースコアで区切られなければなりません。
  
- PK（主キー）がないテーブルがある。
  > 全てのテーブルにPK（主キー）であるidカラムを追加してください。
  
- created_atカラム、updated_atカラムが全て「ユーザー登録日時」になっている。
  > created_atカラム、updated_atカラムはテーブルによってカラム説明が異なります。

## Admin
- テーブル名が複数形でない。
  > Active RecordにおけるCoCを見直して正しいテーブル名にしてください。

- カラム名の先頭に「admin_」が付いている。
  > テーブル名から、それぞれのカラムは「adminに関するもの」ということが明白ですので接頭語は必要ありません。

## Users
- 姓の漢字が間違っている。
  > 「性」ではなく「姓」です。
  
- 名前（姓）, 名前（名）, 名前(姓カナ), 名前(名カナ), 電話番号, メールアドレス, パスワードのカラム名に「user_」が付いている。
  > テーブル名から、それぞれのカラムは「userに関するもの」ということが明白ですので接頭語は必要ありません。

- 配送先カラムがある。
  > 現在のテーブル設計ですと、配送先を複数保持することができません。

- 郵便番号がinteger型
- 電話番号がinteger型
  > 一般的に、「××番号」と言われるものは、文字列型で受ける場合の方が多いです。先頭のゼロに意味がある、左詰で記述する、算術演算の対象でないという理由から文字列型でデータベースに登録します。

- member_statusが何を意味しているか不明。
  > 本カラムは「退会しているか否か」を表すカラムなのでmember_statusというカラム名は適切ではありません。また、DEFAULTでFALSEを指定している点から、退会状況を「true」or「false」で管理する予定でしょうか。もしそうでしたらデータ型は「boolean型」になります。

## Products
- FK（外部キー）がない。
  > ジャンルID、レーベルID、アーティストIDはFK（外部キー）だと思いますので、FKの欄に○の記載をお願いします。
  
- 「disc_id」カラムがある。
  > disc_idは必要でしょうか。ER図をもう一度見直してください。
  
- ジャケット画像, シングル名/アルバム名に「cd_」がついている。
  > テーブル名から、それぞれのカラムは「productに関するもの」ということが明白ですので接頭語は必要ありません。
  
- 在庫数カラムがある。
  > 在庫数は入荷情報と受注履歴から算出することができます。商品に在庫数カラムを持たせてしまうと、「在庫数」と「入荷情報・受注履歴から算出される在庫数」の間に齟齬が生まれる可能性があります。

- 在庫ステータスがある。
  > 在庫ステータスは在庫数から導けるのではないでしょうか。在庫ステータスカラムを持たせてしまうと、在庫数との間に齟齬が生まれたり、在庫ステータスの更新が遅れてしまう可能性があります。

## Discs
- disc_idカラムの「disc_」が不要。
  > テーブル名から、本カラムは「discに関するもの」ということが明白ですので接頭語は必要ありません。
  
- FKである「product_id」の命名が適切でない。
  > FK（外部キー）を設定する場合は、カラム名は {参照先テーブル名の単数形}_idが基本系です。
  
- track_numカラムがある。
  > トラック番号はディスクの中の曲順です。
  > ・1.1曲目
  > ・2.2曲目
  > ・3.3曲目
  > というイメージです。
  > よってdiscsテーブルにtrack_numカラムは必要ありません。

- ソート番号カラムがない。
  > 現在、複数のディスクを保持する場合を想定していません。ディスク番号カラムなどを追加しないとディスクを区別できません。

## Songs
- songカラムの命名が適切でない。
  > もし曲名を表すカラムを作成するのであれば、nameカラムなどにしてください。何のnameを表しているかは、テーブル名から判断できます。

- songカラムのデータ型がintegerになっている。
  > 曲名を保存すると思いますので、正しいデータ型にしてください。

- 曲順を管理するカラムがない
  > CDには通常トラックナンバーのように曲順を管理するカラムがあります。適切なカラムを追加してください。

## Labels
- FK（外部キー）を持っている。
  > FKは必要でしょうか。ER図をもう一度見直してください。

- labelカラムの命名が適切でない。
  > もしレーベル名を表すカラムを作成するのであれば、nameカラムなどにしてください。何のnameを表しているかは、テーブル名から判断できます。

## Artists
- FK（外部キー）を持っている。
   > FKは必要でしょうか。ER図をもう一度見直してください。
   
- artistカラムの命名が適切でない。
  > もしアーティスト名を表すカラムを作成するのであれば、nameカラムなどにしてください。何のnameを表しているかは、テーブル名から判断できます。

- artistカラムのデータ型がintegerになっている。
  > アーティスト名を保存すると思いますので、正しいデータ型にしてください。

## Genre
- FK（外部キー）を持っている。
  > FKは必要でしょうか。ER図をもう一度見直してください。

- genreカラムの命名が適切でない。
  > もしジャンル名を表すカラムを作成するのであれば、nameカラムなどにしてください。何のnameを表しているかは、テーブル名から判断できます。

- genreカラムのデータ型がintegerになっている。
  > ジャンル名を保存すると思いますので、正しいデータ型にしてください。

## Cart item
- FKである「product_id」の命名が適切でない。
  > FK（外部キー）を設定する場合は、カラム名は {参照先テーブル名の単数形}_idが基本系です。
  
- 「buy num」というカラムの命名が適切でない。
  > 数量を表すカラムだと思いますので、「quantity（数量）」などとしてください。

- subtotalカラムがある。
  > 小計は商品の価格と数量から算出できます。「小計カラム」と「商品の価格 × 数量」の値に齟齬が生じる可能性があるため、subtotalカラムは持たせるべきではありません。

## Buy details
- 「Buy details」というテーブル名が適切でない。（テーブルの役割と異なっている）
  > 本テーブルは受注詳細を保持するものと思われます。よって、「Buy details」ですと受注詳細を意味しなくなってしまいます。Active RecordにおけるCoCを見直しながら正しいテーブル名に修正してください。

- buy numは意味不明。スネークケースになってない。
  > 数量を表すカラムだと思いますので、「quantity（数量）」などとしてください。

## Buy
- 「Buy」というテーブル名が適切でない。（テーブルの役割と異なっている）
  > 本テーブルは受注情報を保持するものと思われます。よって、「Buy」ですと受注を意味しなくなってしまいます。Active RecordにおけるCoCを見直しながら正しいテーブル名に修正してください。

- 「buy_details_Id」というFK（外部キー）を持っている。
  > FKは必要でしょうか。ER図をもう一度見直してください。

- stockカラムの命名がカラム説明と合致していない
  > 支払い合計を表すカラムがstockとなっています。正しいカラム名に修正してください。

- payカラムの命名が適切でない。
  > 支払い方法を保持するカラムだと思いますので、「pay_method」などとしてください。

- 支払い方法がのデータ型がstring型になっている。
  > 支払い方法はenumで実装してください。



# レビュー

## Users
- 郵便番号がinteger型
- 電話番号がinteger型
- member_statusが何を意味しているか不明。

## Songs
- 曲順を管理するカラムがない

## Buy_details
- buy numは意味不明。スネークケースになってない。
